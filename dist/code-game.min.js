!function(a,b){b.codeGame=a;var c,d;!function(){var a=function(){function b(){i=Function[o]=Function[o]||function(a){return i[a]||(i[a]={}),i[a]},m=i(w),l=i(t),j=i(u),k=i(v)}function e(){delete Function[o],delete l,delete j,delete k,b()}function f(a){if(!j[a]){var b=arguments,c=b[1];"function"==typeof c?j[a]=c.apply({name:a}):(l[a]=b[2],l[a][p]=c)}}function g(a,b){k[a]=!0;var c,e,f,h=b[p],i=[];if(h)for(e=h.length,c=0;c<e;c++)f=h[c],k[f]?d.ignoreWarnings||console.warn('Recursive dependency between "'+a+'" and "'+f):l[f]&&g(f,l[f]),delete l[f];if(!j.hasOwnProperty(a)){var m=void 0;for(c=0;c<e;c++)f=h[c],f===q?i.push(d):f===r?(m={},i.push(m)):j.hasOwnProperty(f)?i.push(j[f]):d.ignoreWarnings||(i.push(void 0),console.warn('Module "'+a+'" requires "'+f+'", but is undefined'));var n=b.apply({name:a},i);m?m.hasOwnProperty(s)?j[a]=m[s]:j[a]=m:j[a]=n}delete k[a]}function h(){for(var a in l)if(l.hasOwnProperty(a)){var b=l[a];delete l[a];try{g(a,b)}catch(a){throw a}}var c=j[o];c&&(delete j[o],c())}var i,j,k,l,m,n=0,o="~",p=".",q="require",r="exports",s="default",t="c",u="d",v="p",w="r";c=function(a,b,c){if(void 0===b&&(b=[]),"string"!=typeof a)throw new Error('Property "name" requires type string');try{m[a]={name:a,deps:b,fn:c},f.apply({name:a},arguments)}catch(b){throw new Error('ModuleError in "'+a+'": '+b.message)}clearInterval(n),setTimeout(h)},d=function(a,b){if(clearTimeout(n),h(),!b){if("string"!=typeof a&&a.length>1)throw new Error("Callback function required");var c=a.toString();return j[c]}var d=[];"string"==typeof a&&(a=[a]);for(var e=a.length,f=0;f<e;f++)d.push(j[a[f]]);b.apply(null,d)},d.clear=e,d.ignoreWarnings=!1,d.resolve=h,d.workerTemplate=function(b){var c=b.toString(),d=[];c.replace(/\W+require\(("|')(.*?)\1\)/g,function(a,b,c){d.push(c)});var e,f,g,h="function(e) {\nvar define, require;\n("+a+")();\n",i={};for(d=d||[],e=0;e<d.length;e+=1)for(g=m[d[e]],h+='    define("'+g.name+'", '+(g.deps.join?'["'+g.deps.join('","')+'"], '+g.fn:g.deps)+");\n",f=0;f<g.deps.length;f+=1)i[g.deps[f]]||(i[g.deps[f]]=!0,d.push(g.deps[f]));return c.replace(/^.*?\{/,h)},d.ready=function(a,b){j[o]=a,j[p]=b},b()};a()}(),{}.mode="dev",c("app",["Board"],function(b){function c(){return e=new b(30,11),e.generate().then(function(){e.start()})}function d(a,b){e&&e.move(a,b)}var e;a.start=c,a.move=d}),c("Board",["Tile","Pyramid","Cube"],function(a,b,c){function d(b,d){function e(a){q.push(a)}function f(){if(n&&n.dirty){x.clearRect(0,0,u,v),z.clear();for(var a=0;a<q.length;a+=1)q[a].render(z)}}function g(){var f=1,g={x:.5*r,y:.5*d};m=mazegen.generate({rows:d,cols:r});var h=m.getPointsFromEdge(0,[m.types.PATH],f);return m.forcePath(h,g,[m.types.WALL],function(){console.log(m.asString());for(var f=m.starts[0],g=(m.end,0);g<d;g++)for(var h=0;h<r;h++){var i="",j=parseInt(m[h][g],10);1===j?i=obelisk.ColorPattern.GRAY:4===j?i=obelisk.ColorPattern.GRASS_GREEN:3===j&&(i=obelisk.ColorPattern.PURPLE),i&&e(new a(b,{x:g,y:h,z:0},i))}n=new c(b,{x:f.x,y:f.y,z:0},16750848),e(n),o()}),w}function h(a,b){return"object"==typeof a&&(b=a.y,a=a.x),n.moveBy(a,b)}function i(){return{x:n.x,y:n.y}}function j(){p=setInterval(f,20)}function k(){clearInterval(p)}function l(){return new Promise(function(a,b){m.findPath(m.starts[0],m.end,[m.types.WALL],a)})}var m,n,o,p,q=[],r=d,s=document.querySelector("code-game"),t=document.createElement("canvas"),u=s.offsetWidth,v=s.offsetHeight,w=new Promise(function(a,b){o=a});t.setAttribute("width",u),t.setAttribute("height",v);var x=t.getContext("2d");s.appendChild(t);var y=new obelisk.Point(.5*u,.25*v),z=new obelisk.PixelView(t,y);this.add=e,this.render=f,this.generate=g,this.move=h,this.start=j,this.stop=k,this.findPath=l,this.getPos=i}return console.log("board"),d}),c("Tile",["Piece"],function(a){function b(b,c,d){var e=(new obelisk.SideColor).getByInnerColor(d),f=new obelisk.BrickDimension(b,b),g=new obelisk.Brick(f,e),h=new obelisk.Point3D((b-2)*c.x,(b-2)*c.y,(b-2)*c.z);a.call(this,"tile",b,c,g,f,h,e)}return b.prototype=a.prototype,b}),c("Piece",function(){function a(a,b,c,d,e,f,g){this.type=a,this.dms=b,this.x=c.x||0,this.y=c.y||0,this.z=c.z||0,this.shape=d,this.shameDms=e,this.shapePt=f,this.shapeClr=g,this.actionTime=500}return a.prototype.moveBy=function(a,b,c){var d=["x","y","z"],e={x:this.x+(a||0),y:this.y+(b||0),z:this.z+(c||0)},f=this;return f.dirty=1,new Promise(function(a,b){function c(){(g+=1)>=h&&(f.dirty=2,a(f))}for(var g=0,h=0,i=0;i<d.length;i+=1){var j=d[i];if(f[j]!==e[j]){console.log("change",j,f[j],e[j]),h+=1;var k={};k[j]=e[j],createjs.Tween.get(f).to(k,f.actionTime,createjs.Ease.getPowInOut(4)).call(c)}}h+=1,createjs.Tween.get(f).to({z:1},.5*f.actionTime,createjs.Ease.getPowIn(1)).to({z:0},.5*f.actionTime,createjs.Ease.getPowOut(1)).call(c)})},a.prototype.render=function(a){var b=this.dms-2;this.shapePt.x=b*this.x,this.shapePt.y=b*this.y,this.shapePt.z=b*this.z,a.renderObject(this.shape,this.shapePt),2===this.dirty&&(this.dirty=0)},a}),c("Pyramid",["Piece"],function(a){function b(b,c,d,e){var f=(new obelisk.PyramidColor).getByRightColor(d),g=new obelisk.PyramidDimension(b,e),h=new obelisk.Pyramid(g,f),i=new obelisk.Point3D((b-2)*c.x,(b-2)*c.y,(b-2)*c.z);a.call(this,"pyramid",b,c,h,g,i,f)}return b.prototype=a.prototype,b}),c("Cube",["Piece"],function(a){function b(b,c,d,e){var f=new obelisk.CubeDimension(b,b,e?2*b:b),g=(new obelisk.CubeColor).getByHorizontalColor(d),h=new obelisk.Cube(f,g),i=new obelisk.Point3D((b-2)*c.x,(b-2)*c.y,(b-2)*c.z);a.call(this,"cube",b,c,h,f,i,g)}return b.prototype=a.prototype,b})}(this.codeGame||{},function(){return this}());
//# sourceMappingURL=code-game.min.js.map